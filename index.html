<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            height: 100vh;
            overflow: hidden;
        }

        .builder-container {
            display: flex;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            background: #2a2a2a;
            border-right: 1px solid #404040;
            width: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 0;
            gap: 10px;
        }

        .tool-btn {
            width: 40px;
            height: 40px;
            background: #3a3a3a;
            border: none;
            border-radius: 6px;
            color: #e0e0e0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .tool-btn:hover {
            background: #4a4a4a;
            transform: translateY(-1px);
        }

        .tool-btn.active {
            background: #0066cc;
        }

        /* Components Panel */
        .components-panel {
            background: #252525;
            width: 250px;
            border-right: 1px solid #404040;
            padding: 15px;
            overflow-y: auto;
        }

        .panel-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #f0f0f0;
        }

        .component-group {
            margin-bottom: 20px;
        }

        .group-title {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .component-item {
            padding: 10px;
            background: #2a2a2a;
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: grab;
            border: 1px solid #404040;
            transition: all 0.2s;
        }

        .component-item:hover {
            background: #3a3a3a;
            border-color: #0066cc;
        }

        .component-item:active {
            cursor: grabbing;
        }

        /* Canvas */
        .canvas-area {
            flex: 1;
            background: #1e1e1e;
            position: relative;
            overflow: auto;
        }

        .canvas {
            min-height: 100%;
            background: white;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
        }

        .canvas-content {
            padding: 20px;
            min-height: calc(100vh - 80px);
        }

        /* Properties Panel */
        .properties-panel {
            background: #252525;
            width: 280px;
            border-left: 1px solid #404040;
            padding: 15px;
            overflow-y: auto;
        }

        .property-group {
            margin-bottom: 20px;
        }

        .property-label {
            display: block;
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .property-input {
            width: 100%;
            padding: 8px;
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 4px;
            color: #e0e0e0;
            font-size: 13px;
        }

        .property-input:focus {
            outline: none;
            border-color: #0066cc;
        }

        /* Element styles */
        .builder-element {
            min-height: 30px;
            position: relative;
            border: 2px dashed transparent;
            transition: border-color 0.2s;
        }

        .builder-element:hover {
            border-color: #0066cc;
        }

        .builder-element.selected {
            border-color: #ff6b35;
            background: rgba(255, 107, 53, 0.1);
        }

        .element-placeholder {
            color: #999;
            font-style: italic;
            padding: 10px;
        }

        /* Responsive design */
        .device-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .device-btn {
            padding: 5px 10px;
            background: #3a3a3a;
            border: none;
            border-radius: 4px;
            color: #e0e0e0;
            cursor: pointer;
            font-size: 12px;
        }

        .device-btn.active {
            background: #0066cc;
        }

        /* Drag and drop styles */
        .drop-zone {
            min-height: 50px;
            border: 2px dashed #666;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            margin: 10px 0;
        }

        .drop-zone.drag-over {
            border-color: #0066cc;
            background: rgba(0, 102, 204, 0.1);
        }

        /* Color picker */
        .color-input {
            width: 40px;
            height: 30px;
            padding: 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="builder-container">
        <!-- Toolbar -->
        <div class="toolbar">
            <button class="tool-btn active" data-tool="select" title="Select">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M2 2L22 22L20 20H4V4L2 2Z"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="text" title="Text">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 4V7H10.5V19H13.5V7H19V4H5Z"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="image" title="Image">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19ZM8.5 13.5L11 16.51L14.5 12L19 18H5L8.5 13.5Z"/>
                </svg>
            </button>
            <button class="tool-btn" data-tool="preview" title="Preview">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5S21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12S9.24 7 12 7 17 9.24 17 12 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12S10.34 15 12 15 15 13.66 15 12 13.66 9 12 9Z"/>
                </svg>
            </button>
        </div>

        <!-- Components Panel -->
        <div class="components-panel">
            <div class="panel-title">Components</div>
            
            <div class="component-group">
                <div class="group-title">Layout</div>
                <div class="component-item" draggable="true" data-component="container">
                    <div style="font-size: 13px; font-weight: 500;">Container</div>
                    <div style="font-size: 11px; color: #999;">Flexible container</div>
                </div>
                <div class="component-item" draggable="true" data-component="row">
                    <div style="font-size: 13px; font-weight: 500;">Row</div>
                    <div style="font-size: 11px; color: #999;">Horizontal layout</div>
                </div>
                <div class="component-item" draggable="true" data-component="column">
                    <div style="font-size: 13px; font-weight: 500;">Column</div>
                    <div style="font-size: 11px; color: #999;">Vertical layout</div>
                </div>
            </div>

            <div class="component-group">
                <div class="group-title">Basic</div>
                <div class="component-item" draggable="true" data-component="text">
                    <div style="font-size: 13px; font-weight: 500;">Text</div>
                    <div style="font-size: 11px; color: #999;">Simple text block</div>
                </div>
                <div class="component-item" draggable="true" data-component="heading">
                    <div style="font-size: 13px; font-weight: 500;">Heading</div>
                    <div style="font-size: 11px; color: #999;">H1, H2, H3...</div>
                </div>
                <div class="component-item" draggable="true" data-component="button">
                    <div style="font-size: 13px; font-weight: 500;">Button</div>
                    <div style="font-size: 11px; color: #999;">Call to action</div>
                </div>
                <div class="component-item" draggable="true" data-component="image">
                    <div style="font-size: 13px; font-weight: 500;">Image</div>
                    <div style="font-size: 11px; color: #999;">Picture or graphic</div>
                </div>
            </div>

            <div class="component-group">
                <div class="group-title">Forms</div>
                <div class="component-item" draggable="true" data-component="input">
                    <div style="font-size: 13px; font-weight: 500;">Input</div>
                    <div style="font-size: 11px; color: #999;">Text input field</div>
                </div>
                <div class="component-item" draggable="true" data-component="textarea">
                    <div style="font-size: 13px; font-weight: 500;">Textarea</div>
                    <div style="font-size: 11px; color: #999;">Multi-line input</div>
                </div>
            </div>
        </div>

        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="device-controls">
                <button class="device-btn active" data-device="desktop">Desktop</button>
                <button class="device-btn" data-device="tablet">Tablet</button>
                <button class="device-btn" data-device="mobile">Mobile</button>
            </div>
            
            <div class="canvas" id="canvas">
                <div class="canvas-content" id="canvas-content">
                    <div class="drop-zone" id="main-drop-zone">
                        Drop components here to start building
                    </div>
                </div>
            </div>
        </div>

        <!-- Properties Panel -->
        <div class="properties-panel">
            <div class="panel-title">Properties</div>
            
            <div id="no-selection" style="color: #999; font-style: italic; text-align: center; margin-top: 50px;">
                Select an element to edit properties
            </div>

            <div id="element-properties" style="display: none;">
                <div class="property-group">
                    <label class="property-label">Element Type</label>
                    <input type="text" class="property-input" id="element-type" readonly>
                </div>

                <div class="property-group">
                    <label class="property-label">Content</label>
                    <textarea class="property-input" id="element-content" rows="3" placeholder="Enter text content"></textarea>
                </div>

                <div class="property-group">
                    <label class="property-label">CSS Class</label>
                    <input type="text" class="property-input" id="element-class" placeholder="custom-class">
                </div>

                <div class="property-group">
                    <label class="property-label">Background Color</label>
                    <input type="color" class="color-input" id="bg-color" value="#ffffff">
                </div>

                <div class="property-group">
                    <label class="property-label">Text Color</label>
                    <input type="color" class="color-input" id="text-color" value="#000000">
                </div>

                <div class="property-group">
                    <label class="property-label">Padding</label>
                    <input type="text" class="property-input" id="element-padding" placeholder="10px">
                </div>

                <div class="property-group">
                    <label class="property-label">Margin</label>
                    <input type="text" class="property-input" id="element-margin" placeholder="10px">
                </div>

                <div class="property-group">
                    <button style="width: 100%; padding: 10px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="deleteSelected()">
                        Delete Element
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedElement = null;
        let draggedComponent = null;

        // Initialize drag and drop
        function initDragAndDrop() {
            // Component drag start
            document.querySelectorAll('.component-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedComponent = e.target.dataset.component;
                });
            });

            // Canvas drop events
            const canvas = document.getElementById('canvas-content');
            const dropZone = document.getElementById('main-drop-zone');

            [canvas, dropZone].forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (zone === dropZone) {
                        zone.classList.add('drag-over');
                    }
                });

                zone.addEventListener('dragleave', (e) => {
                    if (zone === dropZone) {
                        zone.classList.remove('drag-over');
                    }
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (zone === dropZone) {
                        zone.classList.remove('drag-over');
                    }
                    
                    if (draggedComponent) {
                        const element = createElement(draggedComponent, e.clientX, e.clientY);
                        if (zone === dropZone && dropZone.parentNode) {
                            dropZone.parentNode.insertBefore(element, dropZone);
                            dropZone.style.display = 'none';
                        } else {
                            zone.appendChild(element);
                        }
                        selectElement(element);
                        draggedComponent = null;
                    }
                });
            });
        }

        // Create element based on component type
        function createElement(type) {
            const element = document.createElement('div');
            element.className = `builder-element ${type}-element`;
            element.onclick = (e) => {
                e.stopPropagation();
                selectElement(element);
            };

            switch (type) {
                case 'text':
                    element.innerHTML = '<p>Edit this text</p>';
                    element.dataset.type = 'text';
                    break;
                case 'heading':
                    element.innerHTML = '<h2>Your Heading Here</h2>';
                    element.dataset.type = 'heading';
                    break;
                case 'button':
                    element.innerHTML = '<button style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">Click Me</button>';
                    element.dataset.type = 'button';
                    break;
                case 'image':
                    element.innerHTML = '<img src="data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'200\' height=\'150\' viewBox=\'0 0 200 150\'%3E%3Crect width=\'200\' height=\'150\' fill=\'%23ddd\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' text-anchor=\'middle\' dy=\'.3em\' fill=\'%23999\'%3EImage%3C/text%3E%3C/svg%3E" alt="Placeholder" style="max-width: 100%; height: auto;">';
                    element.dataset.type = 'image';
                    break;
                case 'container':
                    element.innerHTML = '<div class="element-placeholder">Container - Drop elements here</div>';
                    element.style.border = '2px dashed #ccc';
                    element.style.minHeight = '100px';
                    element.style.padding = '20px';
                    element.dataset.type = 'container';
                    break;
                case 'row':
                    element.innerHTML = '<div class="element-placeholder">Row - Horizontal layout</div>';
                    element.style.display = 'flex';
                    element.style.minHeight = '60px';
                    element.style.border = '2px dashed #ccc';
                    element.dataset.type = 'row';
                    break;
                case 'column':
                    element.innerHTML = '<div class="element-placeholder">Column</div>';
                    element.style.flex = '1';
                    element.style.minHeight = '60px';
                    element.style.border = '2px dashed #ccc';
                    element.style.padding = '10px';
                    element.dataset.type = 'column';
                    break;
                case 'input':
                    element.innerHTML = '<input type="text" placeholder="Enter text..." style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 100%;">';
                    element.dataset.type = 'input';
                    break;
                case 'textarea':
                    element.innerHTML = '<textarea placeholder="Enter your message..." style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 100%; min-height: 80px; resize: vertical;"></textarea>';
                    element.dataset.type = 'textarea';
                    break;
                default:
                    element.innerHTML = '<div class="element-placeholder">New Element</div>';
                    element.dataset.type = 'generic';
            }

            return element;
        }

        // Select element and show properties
        function selectElement(element) {
            // Remove previous selection
            document.querySelectorAll('.builder-element.selected').forEach(el => {
                el.classList.remove('selected');
            });

            // Select new element
            element.classList.add('selected');
            selectedElement = element;

            // Show properties panel
            document.getElementById('no-selection').style.display = 'none';
            document.getElementById('element-properties').style.display = 'block';

            // Populate properties
            document.getElementById('element-type').value = element.dataset.type || 'unknown';
            document.getElementById('element-content').value = element.textContent || '';
            document.getElementById('element-class').value = element.className.replace('builder-element selected', '').trim();

            // Get computed styles
            const styles = window.getComputedStyle(element);
            document.getElementById('bg-color').value = rgbToHex(styles.backgroundColor) || '#ffffff';
            document.getElementById('text-color').value = rgbToHex(styles.color) || '#000000';
            document.getElementById('element-padding').value = styles.padding || '';
            document.getElementById('element-margin').value = styles.margin || '';
        }

        // Update element properties
        function updateElementProperty(property, value) {
            if (!selectedElement) return;

            switch (property) {
                case 'content':
                    if (selectedElement.querySelector('p')) {
                        selectedElement.querySelector('p').textContent = value;
                    } else if (selectedElement.querySelector('h1, h2, h3, h4, h5, h6')) {
                        selectedElement.querySelector('h1, h2, h3, h4, h5, h6').textContent = value;
                    } else if (selectedElement.querySelector('button')) {
                        selectedElement.querySelector('button').textContent = value;
                    }
                    break;
                case 'class':
                    selectedElement.className = `builder-element selected ${value}`;
                    break;
                case 'bg-color':
                    selectedElement.style.backgroundColor = value;
                    break;
                case 'text-color':
                    selectedElement.style.color = value;
                    break;
                case 'padding':
                    selectedElement.style.padding = value;
                    break;
                case 'margin':
                    selectedElement.style.margin = value;
                    break;
            }
        }

        // Delete selected element
        function deleteSelected() {
            if (selectedElement) {
                selectedElement.remove();
                selectedElement = null;
                document.getElementById('no-selection').style.display = 'block';
                document.getElementById('element-properties').style.display = 'none';
                
                // Show drop zone if canvas is empty
                const canvas = document.getElementById('canvas-content');
                if (canvas.children.length === 1) {
                    document.getElementById('main-drop-zone').style.display = 'flex';
                }
            }
        }

        // Utility function to convert RGB to HEX
        function rgbToHex(rgb) {
            if (!rgb || rgb === 'rgba(0, 0, 0, 0)' || rgb === 'transparent') return '#ffffff';
            
            const result = rgb.match(/\d+/g);
            if (!result) return '#ffffff';
            
            return '#' + result.slice(0, 3).map(x => {
                const hex = parseInt(x).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            }).join('');
        }

        // Tool selection
        document.querySelectorAll('.tool-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // Device responsiveness
        document.querySelectorAll('.device-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const canvas = document.getElementById('canvas');
                const device = btn.dataset.device;
                
                switch (device) {
                    case 'mobile':
                        canvas.style.maxWidth = '375px';
                        break;
                    case 'tablet':
                        canvas.style.maxWidth = '768px';
                        break;
                    default:
                        canvas.style.maxWidth = 'none';
                }
            });
        });

        // Property inputs event listeners
        document.getElementById('element-content').addEventListener('input', (e) => {
            updateElementProperty('content', e.target.value);
        });

        document.getElementById('element-class').addEventListener('input', (e) => {
            updateElementProperty('class', e.target.value);
        });

        document.getElementById('bg-color').addEventListener('change', (e) => {
            updateElementProperty('bg-color', e.target.value);
        });

        document.getElementById('text-color').addEventListener('change', (e) => {
            updateElementProperty('text-color', e.target.value);
        });

        document.getElementById('element-padding').addEventListener('input', (e) => {
            updateElementProperty('padding', e.target.value);
        });

        document.getElementById('element-margin').addEventListener('input', (e) => {
            updateElementProperty('margin', e.target.value);
        });

        // Click outside to deselect
        document.getElementById('canvas-content').addEventListener('click', (e) => {
            if (e.target.id === 'canvas-content') {
                document.querySelectorAll('.builder-element.selected').forEach(el => {
                    el.classList.remove('selected');
                });
                selectedElement = null;
                document.getElementById('no-selection').style.display = 'block';
                document.getElementById('element-properties').style.display = 'none';
            }
        });

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            initDragAndDrop();
        });
    </script>
</body>
</html>
